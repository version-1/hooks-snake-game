(this["webpackJsonphooks-snake-game"]=this["webpackJsonphooks-snake-game"]||[]).push([[0],{13:function(e,t,n){},14:function(e,t,n){"use strict";n.r(t);var a,i=n(0),c=n.n(i),r=n(7),o=n.n(r),u=(n(13),n(1)),l=function(e){return c.a.createElement("div",{className:"dots ".concat(e.value)})},s=function(e){var t=e.fields;return c.a.createElement("div",{className:"field"},t.map((function(e,t){return e.map((function(e,n){return c.a.createElement(l,{key:"".concat(t,"-").concat(n),value:e})}))})))},f=function(e){var t=e.state,n=e.canUp,a=e.canDown,i=e.onChangeDifficulty,r=t.length,o=t.difficulty,u=n?"":"is-hidden",l=a?"":"is-hidden";return c.a.createElement("div",{className:"navigation"},c.a.createElement("div",{className:"navigation-item"},c.a.createElement("span",{className:"navigation-label"},"Length: "),c.a.createElement("div",{className:"navigation-item-number-container"},c.a.createElement("div",{className:"num-board"},r))),c.a.createElement("div",{className:"navigation-item"},c.a.createElement("span",{className:"navigation-label"},"Difficulty: "),c.a.createElement("div",{className:"navigation-item-number-container"},c.a.createElement("span",{className:"num-board"},o),c.a.createElement("div",{className:"difficulty-button-container"},c.a.createElement("div",{className:"difficulty-button difficulty-up ".concat(u),onClick:function(){return i(1)}}),c.a.createElement("div",{className:"difficulty-button difficulty-down ".concat(l),onClick:function(){return i(-1)}})))))},d={up:"up",down:"down",right:"right",left:"left"},m={FieldSize:35,DefaultDifficulty:3,IntervalList:[5e3,3e3,1e3,500,100],StatusType:{init:"init",playing:"playing",suspended:"suspended",gameover:"gameover"},StatusText:{init:"START",playing:"STOP",gameover:"GAME OVER",suspended:"START"},DirectionType:d,OppositeDirectionType:{up:"down",down:"up",right:"left",left:"right"},DotType:{none:"",snake:"snake",food:"food"},DirectionTypeDelta:{up:function(e){return{x:e.x,y:e.y-1}},down:function(e){return{x:e.x,y:e.y+1}},right:function(e){return{x:e.x+1,y:e.y}},left:function(e){return{x:e.x-1,y:e.y}}},DirectionKeyCodeMap:{37:d.left,38:d.up,39:d.right,40:d.down},SnakeStartPosition:{x:Math.round(17.5)-1,y:Math.round(17.5)-1}},y=function(e){var t=e.status,n=e.onStart,a=e.onStop,i=e.onRestart,r=m.StatusText[t];return c.a.createElement("div",{className:"button-start"},c.a.createElement("button",{className:"btn btn-".concat(t),tabIndex:1,onClick:function(){({init:n,playing:a,gameover:i,suspended:n})[t]()}},r))},p=function(e){var t=e.handleChangeDirection;return c.a.createElement("div",{className:"move-button"},c.a.createElement("button",{className:"btn btn-move btn-left",onClick:function(){return t("left")}},"\u2190"),c.a.createElement("div",{className:"btn-up-down"},c.a.createElement("button",{className:"btn btn-move btn-up",onClick:function(){return t("up")}},"\u2191"),c.a.createElement("button",{className:"btn btn-move btn-down",onClick:function(){return t("down")}},"\u2193")),c.a.createElement("button",{className:"btn btn-move btn-right",onClick:function(){return t("right")}},"\u2192"))},v=n(5),b=n(3),h=function(e,t){return Math.floor(Math.random()*(t+1-e))+e},g=function(e,t,n){return e[t.y][t.x]=n,t},E=function(e){return function(t,n,a){var i=function(e,t){for(var n=function(){var n={x:h(1,e-2),y:h(1,e-2)};if(t.every((function(e){return n.x!==e.x||n.y!==e.y})))return{v:n}};;){var a=n();if("object"===typeof a)return a.v}}(e,t);return g(n,i,a),i}},D=function(e,t,n){for(var a=[],i=0;i<e;i++){var c=new Array(e).fill(t.none);a.push(c)}var r=g(a,n,t.snake);return E(e)([r],a,t.food),a},S=(a=m.FieldSize,function(e){return e.y<0||e.x<0||e.y>a-1||e.x>a-1}),T=E(m.FieldSize),k=function(){return{position:m.SnakeStartPosition,history:[],length:1,difficulty:m.DefaultDifficulty,fields:D(m.FieldSize,m.DotType,m.SnakeStartPosition),tickId:null,status:m.StatusType.init}},N=function(e){return{type:"moving",payload:e}},O=function(e){return{type:"restart",payload:e}},j=function(){return{type:"gameover",payload:{status:m.StatusType.gameover}}},x=function(){return{type:"start",payload:{status:m.StatusType.playing}}},w=function(){return{type:"stop",payload:{status:m.StatusType.suspended}}},C=function(e){return{type:"changeDifficulty",payload:{delta:e.delta}}},M=function(e,t){switch(t.type){case O.name:case N.name:return t.payload;case j.name:case x.name:case w.name:return Object(b.a)({},e,{status:t.payload.status});case C.name:var n=t.payload.delta;return m.IntervalList[e.difficulty-1+n]?Object(b.a)({},e,{difficulty:e.difficulty+n}):e;default:return e}},I=function(e,t,n){var a=n.length,i=n.history,c=n.fields,r=n.position,o=m.DirectionTypeDelta[t](r),u=[r].concat(Object(v.a)(i)).slice(0,a);if(S(o)||function(e,t){return e[t.y][t.x]===m.DotType.snake}(c,o))return e(j(Object(b.a)({},n,{status:m.StatusType.gameover,tickId:null})));var l=Object(v.a)(c),s=a;l[o.y][o.x]===m.DotType.food&&(T([o].concat(Object(v.a)(u)),l,m.DotType.food),s=a+1);var f=u.slice(-1)[0];return g(l,o,m.DotType.snake),g(l,f,m.DotType.none),e(N(Object(b.a)({},n,{status:m.StatusType.playing,history:u,length:s,position:o,fields:l})))},R=null,L=function(){var e=Object(i.useReducer)(M,k()),t=Object(u.a)(e,2),n=t[0],a=t[1],c=Object(i.useState)(0),r=Object(u.a)(c,2),o=r[0],l=r[1],s=Object(i.useState)(),f=Object(u.a)(s,2)[1],d=Object(i.useState)(m.DirectionType.up),y=Object(u.a)(d,2),p=y[0],v=y[1],b=n.status,h=n.difficulty,g=Object(i.useMemo)((function(){return b===m.StatusType.init}),[b]),E=Object(i.useMemo)((function(){return h-1<m.IntervalList.length-1}),[h]),D=Object(i.useMemo)((function(){return h-1>0}),[h]),S={editable:g,canDifficultyUp:E,canDifficultyDown:D},T=Object(i.useCallback)((function(e){g&&a(C({delta:e}))}),[g,a]),N=Object(i.useCallback)((function(e){m.DirectionType[e]&&b===m.StatusType.playing&&m.OppositeDirectionType[p]!==e&&p!==e&&v(e)}),[p,b]),j={handleChangeDirection:N,handleChangeDifficulty:T,handleStart:function(){return a(x())},handleStop:function(){return a(w())},handleRestart:function(){v(m.DirectionType.up),a(O(k()))}};return Object(i.useEffect)((function(){var e=setInterval((function(){console.log("tick"),l((function(e){return e+1}))}),m.IntervalList[h-1]);return f(e),function(){clearInterval(e)}}),[h]),Object(i.useEffect)((function(){n.status===m.StatusType.playing&&I(a,p,n)}),[p,o,a]),Object(i.useEffect)((function(){R&&document.removeEventListener("keydown",R),R=function(e){var t=m.DirectionKeyCodeMap[e.keyCode];N(t)},document.addEventListener("keydown",R)}),[N]),[n,j,S]},A=function(){var e=L(),t=Object(u.a)(e,3),n=t[0],a=t[1],i=t[2],r=n.status,o=n.fields,l=i.editable,d=i.canDifficultyUp,m=i.canDifficultyDown,v=a.handleChangeDifficulty,b=a.handleStart,h=a.handleRestart,g=a.handleStop,E=a.handleChangeDirection;return c.a.createElement("div",{className:"app"},c.a.createElement("header",{className:"header"},c.a.createElement("div",{className:"title-container"},c.a.createElement("h1",{className:"title"},"SNAKE GAME")),c.a.createElement(f,{state:n,editable:l,canUp:d,canDown:m,onChangeDifficulty:v})),c.a.createElement("main",{className:"main"},c.a.createElement(s,{fields:o})),c.a.createElement("footer",{className:"footer"},c.a.createElement(y,{status:r,onStart:b,onRestart:h,onStop:g}),c.a.createElement(p,{handleChangeDirection:E})))};o.a.render(c.a.createElement(c.a.StrictMode,null,c.a.createElement(A,null)),document.getElementById("root"))},8:function(e,t,n){e.exports=n(14)}},[[8,1,2]]]);
//# sourceMappingURL=main.d9612d4d.chunk.js.map