(this["webpackJsonphooks-snake-game"]=this["webpackJsonphooks-snake-game"]||[]).push([[0],{13:function(e,t,n){},14:function(e,t,n){"use strict";n.r(t);var a,i=n(0),o=n.n(i),c=n(7),r=n.n(c),u=(n(13),n(1)),l=function(e){return o.a.createElement("div",{className:"dots ".concat(e.value)})},s=function(e){var t=e.fields;return o.a.createElement("div",{className:"field"},t.map((function(e,t){return e.map((function(e,n){return o.a.createElement(l,{key:"".concat(t,"-").concat(n),value:e})}))})))},f=function(e){var t=e.state,n=e.canUp,a=e.canDown,i=e.onChangeDifficulty,c=t.length,r=t.difficulty,u=n?"":"is-hidden",l=a?"":"is-hidden";return o.a.createElement("div",{className:"navigation"},o.a.createElement("div",{className:"navigation-item"},o.a.createElement("span",{className:"navigation-label"},"Length: "),o.a.createElement("div",{className:"navigation-item-number-container"},o.a.createElement("div",{className:"num-board"},c))),o.a.createElement("div",{className:"navigation-item"},o.a.createElement("span",{className:"navigation-label"},"Difficulty: "),o.a.createElement("div",{className:"navigation-item-number-container"},o.a.createElement("span",{className:"num-board"},r),o.a.createElement("div",{className:"difficulty-button-container"},o.a.createElement("div",{className:"difficulty-button difficulty-up ".concat(u),onClick:function(){return i(1)}}),o.a.createElement("div",{className:"difficulty-button difficulty-down ".concat(l),onClick:function(){return i(-1)}})))))},d={up:"up",down:"down",right:"right",left:"left"},m={FieldSize:35,DefaultDifficulty:3,IntervalList:[500,300,100,50,10],StatusType:{init:"init",playing:"playing",suspended:"suspended",gameover:"gameover"},StatusText:{init:"START",playing:"STOP",gameover:"GAME OVER",suspended:"START"},DirectionType:d,OppositeDirectionType:{up:"down",down:"up",right:"left",left:"right"},DotType:{none:"",snake:"snake",food:"food"},DirectionTypeDelta:{up:function(e){return{x:e.x,y:e.y-1}},down:function(e){return{x:e.x,y:e.y+1}},right:function(e){return{x:e.x+1,y:e.y}},left:function(e){return{x:e.x-1,y:e.y}}},DirectionKeyCodeMap:{37:d.left,38:d.up,39:d.right,40:d.down},SnakeStartPosition:{x:Math.round(17.5)-1,y:Math.round(17.5)-1}},y=function(e){var t=e.status,n=e.onStart,a=e.onStop,i=e.onRestart,c=m.StatusText[t];return o.a.createElement("div",{className:"button-start"},o.a.createElement("button",{className:"btn btn-".concat(t),tabIndex:1,onClick:function(){({init:n,playing:a,gameover:i,suspended:n})[t]()}},c))},p=function(e){var t=e.handleChangeDirection;return o.a.createElement("div",{className:"move-button"},o.a.createElement("button",{className:"btn btn-move btn-left",onClick:function(){return t("left")}},"\u2190"),o.a.createElement("div",{className:"btn-up-down"},o.a.createElement("button",{className:"btn btn-move btn-up",onClick:function(){return t("up")}},"\u2191"),o.a.createElement("button",{className:"btn btn-move btn-down",onClick:function(){return t("down")}},"\u2193")),o.a.createElement("button",{className:"btn btn-move btn-right",onClick:function(){return t("right")}},"\u2192"))},v=n(5),b=n(3),h=function(e,t){return Math.floor(Math.random()*(t+1-e))+e},g=function(e,t,n){return e[t.y][t.x]=n,t},E=function(e){return function(t,n,a){var i=function(e,t){for(var n=function(){var n={x:h(1,e-2),y:h(1,e-2)};if(t.every((function(e){return n.x!==e.x||n.y!==e.y})))return{v:n}};;){var a=n();if("object"===typeof a)return a.v}}(e,t);return g(n,i,a),i}},D=function(e,t,n){for(var a=[],i=0;i<e;i++){var o=new Array(e).fill(t.none);a.push(o)}var c=g(a,n,t.snake);return E(e)([c],a,t.food),a},S=(a=m.FieldSize,function(e){return e.y<0||e.x<0||e.y>a-1||e.x>a-1}),T=E(m.FieldSize),k=function(){return{position:m.SnakeStartPosition,history:[],length:1,difficulty:m.DefaultDifficulty,fields:D(m.FieldSize,m.DotType,m.SnakeStartPosition),tickId:null,status:m.StatusType.init}},N=function(e){return{type:"moving",payload:e}},O=function(e){return{type:"restart",payload:e}},w=function(){return{type:"gameover",payload:{status:m.StatusType.gameover}}},j=function(){return{type:"start",payload:{status:m.StatusType.playing}}},x=function(){return{type:"stop",payload:{status:m.StatusType.suspended}}},C=function(e){return{type:"changeDifficulty",payload:{delta:e.delta}}},M=function(e,t){switch(t.type){case O.name:case N.name:return t.payload;case w.name:case j.name:case x.name:return Object(b.a)({},e,{status:t.payload.status});case C.name:var n=t.payload.delta;return m.IntervalList[e.difficulty-1+n]?Object(b.a)({},e,{difficulty:e.difficulty+n}):e;default:return e}},I=function(e,t,n){var a=n.length,i=n.history,o=n.fields,c=n.position,r=m.DirectionTypeDelta[t](c),u=[c].concat(Object(v.a)(i)).slice(0,a);if(S(r)||function(e,t){return e[t.y][t.x]===m.DotType.snake}(o,r))return e(w(Object(b.a)({},n,{status:m.StatusType.gameover,tickId:null})));var l=Object(v.a)(o),s=a;l[r.y][r.x]===m.DotType.food&&(T([r].concat(Object(v.a)(u)),l,m.DotType.food),s=a+1);var f=u.slice(-1)[0];return g(l,r,m.DotType.snake),g(l,f,m.DotType.none),e(N(Object(b.a)({},n,{status:m.StatusType.playing,history:u,length:s,position:r,fields:l})))},R=null,L=function(){var e=Object(i.useReducer)(M,k()),t=Object(u.a)(e,2),n=t[0],a=t[1],o=Object(i.useState)(0),c=Object(u.a)(o,2),r=c[0],l=c[1],s=Object(i.useState)(),f=Object(u.a)(s,2)[1],d=Object(i.useState)(m.DirectionType.up),y=Object(u.a)(d,2),p=y[0],v=y[1],b=n.status,h=n.difficulty,g=Object(i.useMemo)((function(){return b===m.StatusType.init}),[b]),E=Object(i.useMemo)((function(){return h-1<m.IntervalList.length-1}),[h]),D=Object(i.useMemo)((function(){return h-1>0}),[h]),S={editable:g,canDifficultyUp:E,canDifficultyDown:D},T=Object(i.useCallback)((function(e){g&&a(C({delta:e}))}),[g,a]),N=Object(i.useCallback)((function(e){m.DirectionType[e]&&b===m.StatusType.playing&&m.OppositeDirectionType[p]!==e&&p!==e&&v(e)}),[p,b]),w={handleChangeDirection:N,handleChangeDifficulty:T,handleStart:function(){return a(j())},handleStop:function(){return a(x())},handleRestart:function(){v(m.DirectionType.up),a(O(k()))}};return Object(i.useEffect)((function(){var e=setInterval((function(){l((function(e){return e+1}))}),m.IntervalList[h-1]);return f(e),function(){clearInterval(e)}}),[h]),Object(i.useEffect)((function(){n.status===m.StatusType.playing&&I(a,p,n)}),[p,r,a]),Object(i.useEffect)((function(){R&&document.removeEventListener("keydown",R),R=function(e){var t=m.DirectionKeyCodeMap[e.keyCode];N(t)},document.addEventListener("keydown",R)}),[N]),[n,w,S]},A=function(){var e=L(),t=Object(u.a)(e,3),n=t[0],a=t[1],i=t[2],c=n.status,r=n.fields,l=i.editable,d=i.canDifficultyUp,m=i.canDifficultyDown,v=a.handleChangeDifficulty,b=a.handleStart,h=a.handleRestart,g=a.handleStop,E=a.handleChangeDirection;return o.a.createElement("div",{className:"app"},o.a.createElement("header",{className:"header"},o.a.createElement("div",{className:"title-container"},o.a.createElement("h1",{className:"title"},"SNAKE GAME")),o.a.createElement(f,{state:n,editable:l,canUp:d,canDown:m,onChangeDifficulty:v})),o.a.createElement("main",{className:"main"},o.a.createElement(s,{fields:r})),o.a.createElement("footer",{className:"footer"},o.a.createElement(y,{status:c,onStart:b,onRestart:h,onStop:g}),o.a.createElement(p,{handleChangeDirection:E})))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));r.a.render(o.a.createElement(o.a.StrictMode,null,o.a.createElement(A,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))},8:function(e,t,n){e.exports=n(14)}},[[8,1,2]]]);
//# sourceMappingURL=main.7e6a5f6f.chunk.js.map